<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>StroobGame • Salas + Chat + Juego</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./game.css" />
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <div class="card row" style="align-items:center;justify-content:space-between">
      <h1>StroobGame • Salas + Chat + Juego</h1>
      <span class="pill" id="connStatus">desconectado</span>
      <span class="pill" id="loginStatus">sin login</span>
    </div>

    <!-- Backend -->
    <div class="card">
      <div class="row" style="align-items:center">
        <label>Backend:
          <input id="baseUrl" style="width:360px" placeholder="https://1n21m23q-7121.use2.devtunnels.ms/" />
        </label>
        <div class="small">Debe terminar con <code>/</code></div>
      </div>
    </div>

    <!-- Login / Crear sala / Join -->
    <div class="card split-3">
      <div>
        <h2>1) Login (si no existe lo crea)</h2>
        <label>Usuario:
          <input id="loginUsername" style="width:220px" placeholder="tu nombre" />
        </label>
        <button id="btnLogin">Iniciar sesión</button>
        <div id="loginMsg" class="small muted"></div>
      </div>

      <div>
        <h2>2) Crear sala</h2>
        <button id="btnCreateRoom">Crear sala (owner = usuario logueado)</button>
        <div class="small">Código creado: <b id="createdCode">—</b></div>
      </div>

      <div>
        <h2>3) Unirse a sala</h2>
        <label>RoomCode:
          <input id="roomCode" style="width:120px" placeholder="12345" />
        </label>
        <button id="btnConnect" disabled>Conectar</button>
        <button id="btnDisconnect" disabled>Desconectar</button>
      </div>
    </div>

    <!-- Zona de juego + acciones -->
    <div class="card">
      <div class="row" style="align-items:center;justify-content:space-between">
        <h2>Juego (Stroop por turnos)</h2>
        <div class="row" style="gap:8px;align-items:center">
          <label>Rondas por jugador:
            <input id="roundsPerPlayer" type="number" min="1" max="10" value="4" style="width:70px" />
          </label>
          <button id="btnStartGame" disabled>Iniciar juego (owner)</button>
          <span class="pill" id="turnInfo">sin juego</span>
        </div>
      </div>

      <!-- UI del round -->
      <div id="gameArea" class="game hidden">
        <div class="word" id="wordText">—</div>
        <div class="subtitle">Selecciona el color que <u>dice</u> la palabra</div>

        <div class="options">
          <button class="color-card" id="opt1" disabled></button>
          <button class="color-card" id="opt2" disabled></button>
        </div>

        <div class="row small" style="justify-content:space-between;margin-top:8px">
          <div>Te quedan: <b id="remaining">—</b> rondas en tu turno</div>
          <div>Tiempo (última respuesta): <b id="lastTime">—</b> ms</div>
        </div>
      </div>
    </div>

    <!-- Layout dos columnas: jugadores / chat -->
    <div class="grid">
      <!-- Jugadores y scoreboard en sala -->
      <div class="card pane">
        <h2>Jugadores</h2>
        <ul id="players" class="list players"></ul>
        <h3 style="margin-top:12px">Marcador (sala)</h3>
        <div id="scoreboard" class="list" style="height:180px"></div>
        <div class="small">connId: <span id="connId" class="muted">—</span></div>
      </div>

      <!-- Chat -->
      <div class="card pane">
        <div class="row" style="justify-content:space-between;align-items:center">
          <h2>Chat</h2>
          <div class="small">Ranking global</div>
        </div>
        <div class="list" id="chat"></div>
        <div class="msgline">
          <input id="msg" placeholder="Escribe un mensaje…" maxlength="400" />
          <button id="btnSend" disabled>Enviar</button>
        </div>
      </div>
    </div>

    <!-- Ranking global -->
    <div class="card">
      <h2>Ranking global</h2>
      <div id="ranking" class="list" style="height:160px"></div>
    </div>

    <!-- Logs -->
    <div class="card small">
      <b>Logs:</b>
      <div id="log" class="list" style="height:160px"></div>
    </div>
  </div>

  <!-- SignalR -->
  <script src="./node_modules/@microsoft/signalr/dist/browser/signalr.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>
